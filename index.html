<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeChat Formatting Tool - å¼€æºæ’ç‰ˆç¥å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>
<body class="bg-gray-100 h-screen flex flex-col overflow-hidden">

    <header class="bg-white border-b px-6 py-3 flex justify-between items-center shadow-sm z-10">
        <div class="flex items-center gap-2">
            <h1 class="text-xl font-bold text-indigo-600">WeChat Format</h1>
            <span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded">v1.0 Beta</span>
        </div>
        <button onclick="copyToWeChat()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-medium transition-all transform active:scale-95">
            ä¸€é”®å¤åˆ¶åˆ°å…¬ä¼—å·
        </button>
    </header>

    <main class="flex-1 flex overflow-hidden">
        <textarea id="editor" class="w-1/2 p-6 bg-gray-50 resize-none focus:outline-none border-r border-gray-200 text-gray-700" placeholder="åœ¨æ­¤è¾“å…¥ Markdown å†…å®¹..."></textarea>
        
        <div class="w-1/2 overflow-y-auto bg-white p-8">
            <div id="preview-content" class="max-w-[500px] mx-auto min-h-[800px] border p-8 shadow-sm rounded-lg bg-white"></div>
            
            <div class="mt-12 pt-8 border-t border-dashed border-gray-200 text-center">
                <p class="text-gray-500 text-sm mb-4">å¦‚æœå·¥å…·å¸®åˆ°äº†ä½ ï¼Œè¯·ä½œè€…å–æ¯å’–å•¡ â˜•</p>
                <div class="flex justify-center gap-4">
                    <a href="https://afdian.net/a/jin-ship-jack" target="_blank" class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm hover:bg-purple-700 transition-colors">åœ¨çˆ±å‘ç”µæ”¯æŒæˆ‘</a>
                    <button onclick="document.getElementById('pay-modal').style.display='flex'" class="bg-green-600 text-white px-4 py-2 rounded-md text-sm hover:bg-green-700 transition-colors">å¾®ä¿¡æ‰«ç èµèµ</button>
                </div>
            </div>
        </div>
    </main>

    <div id="pay-modal" class="fixed inset-0 bg-black/70 z-50 hidden justify-center items-center" onclick="this.style.display='none'">
        <div class="bg-white p-6 rounded-2xl text-center shadow-2xl" onclick="event.stopPropagation()">
            <p class="font-bold text-lg mb-4">æ„Ÿè°¢æ”¯æŒå¼€æºé¡¹ç›®</p>
            <img src="https://github.com/jin-ship-jack/wechat-format/blob/main/pay.jpg?raw=true" class="w-64 rounded-lg mx-auto shadow-sm">
            <p class="text-xs text-gray-400 mt-4 underline cursor-pointer">ç‚¹å‡»ç©ºç™½å¤„å…³é—­</p>
        </div>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const preview = document.getElementById('preview-content');

        // è®¾ç½® Markdown é»˜è®¤ç¤ºä¾‹
        editor.value = "# æ¬¢è¿ä½¿ç”¨\n\nåœ¨è¿™é‡Œå¼€å§‹ä½ çš„æ’ç‰ˆ...\n\n- å®æ—¶é¢„è§ˆ\n- å¾®ä¿¡æ ·å¼å†…è”\n- Mac é£æ ¼ä»£ç å—";

        // æ¸²æŸ“å‡½æ•°
        function render() {
            preview.innerHTML = marked.parse(editor.value);
        }

        editor.addEventListener('input', render);
        render(); // åˆå§‹æ¸²æŸ“

        // å¤åˆ¶åŠŸèƒ½
        function copyToWeChat() {
            const range = document.createRange();
            range.selectNode(preview);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            try {
                document.execCommand('copy');
                alert('ğŸš€ å¤åˆ¶æˆåŠŸï¼è¯·ç›´æ¥å»å…¬ä¼—å·åå°ç²˜è´´ã€‚');
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å…¨é€‰é¢„è§ˆåŒºå†…å®¹å¤åˆ¶ã€‚');
            }
            window.getSelection().removeAllRanges();
        }
    </script>
</body>
</html>
